"use strict";(self["webpackChunkjzshop9"]=self["webpackChunkjzshop9"]||[]).push([[724],{6724:function(t,s,a){a.r(s),a.d(s,{default:function(){return h}});a(4114);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"prodetail"},[s("van-nav-bar",{attrs:{fixed:"",title:"商品详情页","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-swipe",{attrs:{autoplay:3e3},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[s("div",{staticClass:"custom-indicator"},[t._v(" "+t._s(t.current+1)+" / "+t._s(t.images.length)+" ")])]},proxy:!0}])},t._l(t.images,(function(t){return s("van-swipe-item",{key:t.external_url},[s("img",{attrs:{src:t.external_url}})])})),1),s("div",{staticClass:"info"},[s("div",{staticClass:"title"},[s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(t.goodsDetail.goods_price_min))]),s("span",{staticClass:"oldprice"},[t._v("￥"+t._s(t.goodsDetail.goods_price_max))])]),s("div",{staticClass:"sellcount"},[t._v("已售"+t._s(t.goodsDetail.stock_total)+"件")])]),s("div",{staticClass:"msg text-ellipsis-2"},[t._v(" "+t._s(t.goodsDetail.goods_name)+" ")]),s("div",{staticClass:"service"},[s("div",{staticClass:"left-words"},[s("span",[s("van-icon",{attrs:{name:"passed"}}),t._v("七天无理由退货")],1),s("span",[s("van-icon",{attrs:{name:"passed"}}),t._v("48小时发货")],1)]),s("div",{staticClass:"right-icon"},[s("van-icon",{attrs:{name:"arrow"}})],1)])]),s("div",{staticClass:"comment"},[s("div",{staticClass:"comment-title"},[s("div",{staticClass:"left"},[t._v("商品评价 (5条)")]),s("div",{staticClass:"right"},[t._v("查看更多 "),s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"comment-list"},t._l(t.rowsList,(function(a){return s("div",{key:a.comment_id,staticClass:"comment-item"},[s("div",{staticClass:"top"},[s("img",{attrs:{src:a.user.avatar_url||"https://smart-shop.itheima.net//uploads//10001//20230321//a0db9adb2e666a65bc8dd133fbed7834.png",alt:"头像"}}),s("div",{staticClass:"name"},[t._v(t._s(a.user.nick_name))]),s("van-rate",{attrs:{size:16,value:a.score/2,color:"#ffd21e","void-icon":"star","void-color":"#eee"}})],1),s("div",{staticClass:"content"},[t._v(" "+t._s(a.content)+" ")]),s("div",{staticClass:"time"},[t._v(" "+t._s(a.create_time)+" ")])])})),0)]),s("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.goodsDetail.content)}}),s("div",{staticClass:"footer"},[s("div",{staticClass:"icon-home"},[s("van-icon",{attrs:{name:"wap-home-o"}}),s("span",[t._v("首页")])],1),s("div",{staticClass:"icon-cart",on:{click:function(s){return t.$router.push("/cats")}}},[t.cartTotal>0?s("span",{staticClass:"num"},[t._v(t._s(t.cartTotal))]):t._e(),s("van-icon",{attrs:{name:"shopping-cart-o"}}),s("span",[t._v("购物车")])],1),s("div",{staticClass:"btn-add",on:{click:t.addcart}},[t._v("加入购物车")]),s("div",{staticClass:"btn-buy",on:{click:t.buyNow}},[t._v("立刻购买")])]),s("van-action-sheet",{attrs:{title:"cart"===t.type?"加入购物车":"立刻购买"},model:{value:t.isshow,callback:function(s){t.isshow=s},expression:"isshow"}},[s("div",{staticClass:"product"},[s("div",{staticClass:"product-title"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.goodsDetail.goods_image}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"price"},[s("span",[t._v("¥")]),s("span",{staticClass:"nowprice"},[t._v(t._s(t.goodsDetail.goods_price_min))])]),s("div",{staticClass:"count"},[s("span",[t._v("库存")]),s("span",[t._v(t._s(t.goodsDetail.stock_total))])])])]),s("div",{staticClass:"num-box"},[s("span",[t._v("数量")]),s("CountBox",{attrs:{goodsNum:t.goodsNum},on:{addnum:t.addNum,sunNum:t.subNum}})],1),t.goodsDetail.stock_total>0?s("div",{staticClass:"showbtn"},["cart"===t.type?s("div",{staticClass:"btn",on:{click:t.goodsaddcart}},[t._v(" 加入购物车 ")]):s("div",{staticClass:"btn now",on:{click:t.userbuynow}},[t._v("立刻购买")])]):s("div",{staticClass:"btn-none"},[t._v("该商品已抢完")])])])],1)},o=[],e=a(9652),n=a(8429),c=a(2272),l=a(3258),d={name:"ProDetail",components:{CountBox:n.A},data(){return{images:["https://img01.yzcdn.cn/vant/apple-1.jpg","https://img01.yzcdn.cn/vant/apple-2.jpg"],current:0,goodsDetail:{},limit:5,rowsList:[],isshow:!1,type:"cart",goodsNum:2,cartTotal:0}},methods:{userbuynow(){let t=(0,c.Vp)();t.token?this.$router.push({path:"/pay",query:{mode:"buyNow",goodsId:this.goodsDetail.goods_id,goodsNum:this.goodsNum,goodsSkuId:this.goodsDetail.skuList[0].goods_sku_id}}):this.$dialog.confirm({title:"温馨提示",message:"此时需要先登录才能继续操作哦",confirmButtonText:"去登录",cancelButtonText:"再逛逛"}).then((()=>{this.$router.push({path:"/login",query:{allpath:this.$route.fullPath}})})).catch((()=>{}))},onChange(t){this.current=t},async mapgoodsDetail(){let t=await(0,l.YS)(this.goodId);this.goodsDetail=t.data.detail,this.images=this.goodsDetail.goods_images},addcart(){this.type="cart",this.isshow=!0},buyNow(){this.type="bynow",this.isshow=!0},subNum(t){this.goodsNum=t},addNum(t){this.goodsNum=t},async goodsaddcart(){let t=(0,c.Vp)();if(t.token){let t=await(0,e.uF)(this.goodId,this.goodsNum,this.goodsDetail.skuList[0].goods_sku_id);console.log(t),this.cartTotal=t.data.cartTotal,this.isshow=!1}else this.$dialog.confirm({title:"温馨提示",message:"此时需要先登录才能继续操作哦",confirmButtonText:"去登录",cancelButtonText:"再逛逛"}).then((()=>{this.$router.push({path:"/login",query:{allpath:this.$route.fullPath}})})).catch((()=>{}))}},computed:{goodId(){return this.$route.query.goodsId}},async created(){this.mapgoodsDetail();const t=await(0,l.sK)(this.goodId,this.limit);this.rowsList=t.data.list}},r=d,u=a(1656),v=(0,u.A)(r,i,o,!1,null,"601cfffa",null),h=v.exports}}]);
//# sourceMappingURL=724.715269bc.js.map